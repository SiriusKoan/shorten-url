{% extends "base.html" %}
{% block head_title %}Shorten URL{% endblock head_title%}
{% block extra_script %}
<script>
	function copy_function() {
		var new_url = document.getElementById('new');
		var server_name = document.getElementById("server_name");
		var copy_button = document.getElementById('copy-button');
		new_url.addEventListener("copy", function (event) {
			event.preventDefault();
			event.clipboardData.setData("text/plain", server_name.innerText.concat(new_url.value));
		})
		document.execCommand("copy");
		copy_button.innerText = 'Copied';
	}
</script>
<script src="{{ url_for('static', filename = 'msg.js') }}"></script>
{% endblock extra_script %}

{% block title %}Shorten URL{% endblock title %}
{% block content%}
<form action="/" method="post">
	<div>
		<span class="tips">Your URL: </span>
		<input type="text" name="old" placeholder="https://" required>
	</div>
	<div>
		<span class="tips"><b>Custom Short Link: </b></span>
		<i><span class="tips" id="server_name">{{ server_name }}</span></i>
		<input type="text" name="new" id="new" required>
		<button onclick="copy_function();" id="copy-button" type="button">Copy</button>
	</div>
	{{ recaptcha }}
	<input type="submit" value="submit">
</form>
<div>
	<h3>Rule:</h3>
	<ul>
		<li>Alpha, '0123456789' and '-_' are allowed</li>
	</ul>
</div>
{% endblock content%}